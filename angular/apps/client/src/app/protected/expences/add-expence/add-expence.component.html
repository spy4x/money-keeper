<h1 class="m-t-0">Add expense</h1>

<form [formGroup]="form"
      id="form"
      (ngSubmit)="submit()"
      novalidate>

  <mat-form-field>
    <input matInput
           label="Amount"
           formControlName="value"
           placeholder="Amount, $"
           name="value"
           type="number"
           autofocus>
    <mat-error *ngIf="form.controls['value'].hasError('required')">
      Field is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Currency" formControlName="currency">
      <mat-option *ngFor="let currency of currencies$ | async" [value]="currency?.id">
        {{currency.symbol}} {{currency.title}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="form.controls['category'].hasError('required')">
      Field is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Category" formControlName="category">
      <mat-option *ngFor="let category of categories$ | async" [value]="category?.id">
        {{category?.name}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="form.controls['category'].hasError('required')">
      Field is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <input matInput
           label="Comment"
           placeholder="Comment"
           formControlName="comment"
           name="comment"
           [errorStateMatcher]="matcher">
    <mat-error *ngIf="form.controls['comment'].hasError('required')">
      Field is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <input matInput
           label="Date"
           formControlName="date"
           placeholder="Date"
           name="date"
           [matDatepicker]="picker">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
    <mat-error *ngIf="form.controls['date'].hasError('required')">
      Field is <strong>required</strong>
    </mat-error>
  </mat-form-field>
</form>

<div class="actions">
  <button mat-fab
          color="accent"
          class="secondary-fab-button"
          type="button"
          [routerLink]="['/expenses']">
    <mat-icon>close</mat-icon>
  </button>

  <button mat-fab
          color="primary"
          class="main-fab-button"
          type="submit"
          form="form">
    <mat-icon>check</mat-icon>
  </button>
</div>
